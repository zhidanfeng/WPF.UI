<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
                    xmlns:ZUI="clr-namespace:ZdfFlatUI"
                    xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
                    xmlns:ei="http://schemas.microsoft.com/expression/2010/interactions"
                    xmlns:Converter="clr-namespace:ZdfFlatUI.Converters">

    <Converter:StringIsEmptyConverter x:Key="StringIsEmptyConverter" />

    <PathGeometry x:Key="Icon_Close" Figures="M754.782 212.596 512 455.368 269.218 212.596c-13.081-13.081-34.29-13.081-47.369 0-13.081 13.081-13.081 34.288 0 47.367l242.782 242.771L221.849 745.507c-13.081 13.081-13.081 34.288 0 47.367 13.081 13.081 34.29 13.081 47.369 0L512 550.103l242.782 242.771c13.081 13.081 34.289 13.081 47.37 0 13.081-13.081 13.081-34.288 0-47.367L559.37 502.735l242.782-242.771c13.081-13.081 13.081-34.288 0-47.367C789.07 199.517 767.862 199.517 754.782 212.596z" />
    <PathGeometry x:Key="InfoIcon" Figures="M510.967872 118.772131c-220.875394 0-399.962505 179.061308-399.962505 399.962505 0 220.875394 179.087111 399.949603 399.962505 399.949603 220.901197 0 399.962505-179.074209 399.962505-399.949603C910.930377 297.820537 731.881971 118.772131 510.967872 118.772131zM510.967872 282.390223c30.151039 0 54.560867 20.345823 54.560867 45.452337s-24.409827 45.452337-54.560867 45.452337c-30.099433 0-54.535064-20.345823-54.535064-45.452337S480.868439 282.390223 510.967872 282.390223zM583.707093 736.887791 438.280257 736.887791l0-18.178355 36.343807 0L474.624065 445.995414l-36.343807 0 0-18.178355 109.070127 0 0 290.879476 36.356709 0L583.707093 736.887791z" />
    <PathGeometry x:Key="WarnIcon" Figures="M512 109.707c-221.184 0-400.498 179.314-400.498 400.498 0 221.202 179.314 400.498 400.498 400.498s400.498-179.296 400.498-400.498c0-221.202-179.314-400.498-400.498-400.498zM512 729.331c-25.377 0-45.948-20.571-45.948-45.948s20.571-45.948 45.948-45.948c25.395 0 45.948 20.589 45.948 45.948 0 25.377-20.553 45.948-45.948 45.948zM537.323 580.182c-3.987 12.507-14.017 20.48-25.323 20.48-11.323 0-21.9-9.684-25.323-20.48-3.404-10.832-29.291-179.569-29.291-251.239 0-18.205 18.205-55.742 54.049-55.742s55.178 36.973 55.178 55.742c0 72.236-25.323 238.715-29.291 251.239z" />
    <PathGeometry x:Key="ErrorIcon" Figures="M510.806 133.727c-214.41 0-388.226 173.816-388.226 388.226s173.815 388.226 388.226 388.226 388.226-173.816 388.226-388.226-173.816-388.226-388.226-388.226zM702.966 659.211l-54.902 54.904-137.261-137.26-137.258 137.26-54.902-54.904 137.258-137.258-137.258-137.258 54.902-54.904 137.258 137.26 137.261-137.261 54.902 54.904-137.258 137.259 137.258 137.258z" />
    <PathGeometry x:Key="SelectedIcon" Figures="M512 145.656381c-197.47763 0-358.157169 160.679539-358.157169 358.157169 0 197.503213 160.653957 358.157169 358.157169 358.157169s358.157169-160.653957 358.157169-358.157169C870.157169 306.33592 709.50219 145.656381 512 145.656381zM684.83437 444.73706l-205.751061 207.986985c-0.051165 0.051165-0.154519 0.076748-0.205685 0.154519-0.076748 0.051165-0.076748 0.154519-0.154519 0.205685-1.644453 1.593288-3.674693 2.569522-5.575995 3.64911-0.950651 0.539282-1.721201 1.362021-2.724041 1.747807-3.083222 1.233084-6.346545 1.87572-9.610892 1.87572-3.288906 0-6.604418-0.642636-9.713222-1.926886-1.027399-0.436952-1.850138-1.310855-2.826372-1.850138-1.901303-1.079588-3.880377-2.030239-5.52483-3.64911-0.051165-0.051165-0.076748-0.154519-0.128937-0.205685-0.051165-0.076748-0.154519-0.076748-0.205685-0.154519L341.220429 548.577057c-9.893324-10.175757-9.662057-26.441209 0.5137-36.334533 10.175757-9.867742 26.415626-9.68764 36.334533 0.5137l82.922594 85.209684L648.319735 408.582629c9.970072-10.099009 26.26213-10.201339 36.334533-0.205685C694.701089 418.372599 694.804443 434.638051 684.83437 444.73706z" />

    <SolidColorBrush x:Key="Color_Info" Color="#00ABF0" />
    <SolidColorBrush x:Key="Color_Success" Color="#00cc66" />
    <SolidColorBrush x:Key="Color_Warning" Color="#ff9900" />
    <SolidColorBrush x:Key="Color_Error" Color="#ff6600" />

    <Style TargetType="{x:Type ZUI:MessageBoxModule}">
        <Setter Property="FontFamily" Value="Consolas, Microsoft YaHei" />
        <Setter Property="FontSize" Value="12" />
        <Setter Property="ResizeMode" Value="CanMinimize" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ZUI:MessageBoxModule}">
                    <Grid x:Name="grid" Width="300" Height="200" RenderTransformOrigin="0.5, 0.5">
                        <Grid.RenderTransform>
                            <TransformGroup>
                                <ScaleTransform />
                                <SkewTransform />
                                <RotateTransform />
                                <TranslateTransform />
                            </TransformGroup>
                        </Grid.RenderTransform>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="20" />
                            <RowDefinition Height="auto" />
                            <RowDefinition Height="1" />
                            <RowDefinition Height="*" />
                            <RowDefinition Height="auto" />
                        </Grid.RowDefinitions>
                        <Border Grid.RowSpan="5" Background="#FFF" BorderBrush="Black" CornerRadius="5">
                            <Border.Effect>
                                <DropShadowEffect BlurRadius="8" Opacity="0.2" ShadowDepth="0" Color="Brown" />
                            </Border.Effect>
                        </Border>
                        <Border Grid.Row="0" Grid.RowSpan="5" Background="#FFFFFF" BorderBrush="#CCCEDB"
                                BorderThickness="1" CornerRadius="5" SnapsToDevicePixels="True" UseLayoutRounding="True" />

                        <!--#region 图标-->
                        <Border Grid.Row="0" Width="40" Height="40" Margin="0,-20,0,0"
                                Background="#FFFFFF" CornerRadius="100">
                            <Border.Effect>
                                <DropShadowEffect BlurRadius="8" Opacity="0.2" ShadowDepth="0" Color="Brown" />
                            </Border.Effect>
                        </Border>
                        <Path x:Name="Icon" Grid.Row="0" Width="40" Height="40" Margin="0,-20,0,0" Stretch="Uniform" />
                        <!--#endregion-->

                        <ZUI:PathIconButton x:Name="PART_CloseButton" Margin="0,10,10,0" HorizontalAlignment="Right"
                                            VerticalAlignment="Center" MouseOverPathColor="#446CB3" NormalPathColor="#99A5C2"
                                            PathData="{StaticResource Icon_Close}"
                                            PathWidth="10" />
                        
                        <!--#region 标题-->
                        <TextBlock x:Name="PART_Title" Grid.Row="1" Margin="10,20" HorizontalAlignment="Center" FontSize="18"
                                   Foreground="#333333" Text="{TemplateBinding Title}" />
                        <!--#endregion-->

                        <Border x:Name="SplitLine" Grid.Row="2" Margin="15,0" BorderBrush="#55DCE0E9" BorderThickness="0,1,0,0"
                                SnapsToDevicePixels="True" UseLayoutRounding="True" />

                        <!--#region 内容-->
                        <TextBlock x:Name="PART_Content" Grid.Row="3" Margin="15,15" FontSize="14"
                                   HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="#666666"
                                   Text="{TemplateBinding MessageText}" TextWrapping="Wrap" />
                        <!--#endregion-->

                        <!--#region 按钮组-->
                        <ItemsControl x:Name="PART_ButtonPanel" Grid.Row="4" Margin="0,10,0,15" HorizontalAlignment="Center"
                                      ItemsSource="{TemplateBinding ButtonCollection}"
                                      ScrollViewer.VerticalScrollBarVisibility="Disabled"
                                      HorizontalContentAlignment="Center"
                                      VerticalContentAlignment="Center">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <UniformGrid Rows="1" />
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                        </ItemsControl>
                        <!--#endregion-->

                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="WindowStates">
                                <VisualState x:Name="Loaded">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.2" From="0.7" Storyboard.TargetName="grid"
                                                         Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleX)"
                                                         To="1" />
                                        <DoubleAnimation Duration="0:0:0.2" From="0.7" Storyboard.TargetName="grid"
                                                         Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleY)"
                                                         To="1" />
                                        <DoubleAnimation Duration="0:0:0.2" From="0" Storyboard.TargetName="grid"
                                                         Storyboard.TargetProperty="(UIElement.Opacity)"
                                                         To="1" />
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Closed">
                                    <Storyboard x:Name="aa">
                                        <!--<i:Interaction.Triggers>
                                            <i:EventTrigger EventName="Completed">
                                                <ei:CallMethodAction MethodName="Close"
                                                                     TargetObject="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Window}}" />
                                            </i:EventTrigger>
                                        </i:Interaction.Triggers>-->
                                        <DoubleAnimation Duration="0:0:0.2" From="1" Storyboard.TargetName="grid"
                                                         Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleX)"
                                                         To="0" />
                                        <DoubleAnimation Duration="0:0:0.2" From="1" Storyboard.TargetName="grid"
                                                         Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleY)"
                                                         To="0" />
                                        <DoubleAnimation Duration="0:0:0.2" From="1" Storyboard.TargetName="grid"
                                                         Storyboard.TargetProperty="(UIElement.Opacity)"
                                                         To="0" />
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <DataTrigger Binding="{Binding Type, RelativeSource={RelativeSource Self}}" Value="Info">
                            <Setter TargetName="Icon" Property="Data" Value="{StaticResource InfoIcon}" />
                            <Setter TargetName="Icon" Property="Fill" Value="{StaticResource Color_Info}" />
                        </DataTrigger>
                        <DataTrigger Binding="{Binding Type, RelativeSource={RelativeSource Self}}" Value="Success">
                            <Setter TargetName="Icon" Property="Data" Value="{StaticResource SelectedIcon}" />
                            <Setter TargetName="Icon" Property="Fill" Value="{StaticResource Color_Success}" />
                        </DataTrigger>
                        <DataTrigger Binding="{Binding Type, RelativeSource={RelativeSource Self}}" Value="Warn">
                            <Setter TargetName="Icon" Property="Data" Value="{StaticResource WarnIcon}" />
                            <Setter TargetName="Icon" Property="Fill" Value="{StaticResource Color_Warning}" />
                        </DataTrigger>
                        <DataTrigger Binding="{Binding Type, RelativeSource={RelativeSource Self}}" Value="Error">
                            <Setter TargetName="Icon" Property="Data" Value="{StaticResource ErrorIcon}" />
                            <Setter TargetName="Icon" Property="Fill" Value="{StaticResource Color_Error}" />
                        </DataTrigger>
                        <DataTrigger Binding="{Binding Title, RelativeSource={RelativeSource Self}, Converter={StaticResource StringIsEmptyConverter}}" Value="True">
                            <Setter TargetName="PART_Title" Property="Visibility" Value="Collapsed" />
                            <Setter TargetName="SplitLine" Property="Visibility" Value="Collapsed" />
                        </DataTrigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary>